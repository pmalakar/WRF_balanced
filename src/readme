This directory contains following 9 files whose locations in the WRF directory are as below:

dyn_em/couple_or_uncouple_em.F  dyn_em/start_em.F external/RSL_LITE/gen_comms.c  external/RSL_LITE/module_dm.F  external/RSL_LITE/rsl_bcast.c  frame/module_domain.F  frame/module_domain_type.F  frame/module_integrate.F   share/mediation_integrate.F


In order to test sibling domain parallel execution, as of now a file named 'nestconfig' must be present with the rectangular nest decompositions in the working directory. Example entry in the file for 1024 processors is below.

First line: Number of sibling nests
Rest of the lines: <Nest id> <Start rank> <Nest-Px> <Nest-Py>

2
2 0 24 32
3 24 8 32

Note: Sum of (product of Nest-Px * Nest-Py) must be total #processors.
For eg: In this case 24*32 + 8*32 = 1024

An alternate configuration could be:

2
2 0 32 8
3 256 32 24

This 'nestconfig' file can be generated by running 'prepareconfig.pl'


To get timing of each run:


Total time: 

grep "Timing for main" rsl.error.00* | grep " 1: " | awk '{print $9}' | awk '{if($1>0){total+=$1; count+=1}} END {print total/count}'


Domain 2 time:

grep "Timing for main" rsl.error.00* | grep " 2: " | awk '{print $9}' | awk '{if($1>0){total+=$1; count+=1}} END {print total/count}'


Domain 3 time:

grep "Timing for main" rsl.error.00* | grep " 3: " | awk '{print $9}' | awk '{if($1>0){total+=$1; count+=1}} END {print total/count}'

